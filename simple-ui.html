<html>
    <head>
        <meta charset="utf-8" />
        <title>Algolia Search - Simple UI</title>

        <link href="simple-ui.css" rel="stylesheet" type="text/css"/>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="algoliasearch-min.js"></script>
        <script>

            function searchCallback(success, content) {
                if (content.query != $("#inputField").val())
                    return;
                $("#servertime").html("server response time: " + content.processingTimeMS + "ms");
                $("#results").html('');
                for (var i = 0; i < content.hits.length; ++i) {
                    var h = content.hits[i];
                    $("#results").append("<li class='hit'>" + displayHit(h) + "</li>");
                }
            }

            function displayHit(hit) {
                var result = '';

                found = false;
                for(var propertyName in hit._highlightResult) {
                    el = hit._highlightResult[propertyName];
                    if (el.matchLevel !== 'none') {
                        result += "<div class='secondline'>" + propertyName.substr(0,1).toUpperCase() +
                                    propertyName.substr(1) + ": " + el.value + "</div>";
                        found = true;
                    }
                }
                if (!found) {
                    for(var propertyName in hit._highlightResult) {
                        el = hit._highlightResult[propertyName];
                        result += "<div class='secondline'>" + propertyName.substr(0,1).toUpperCase() +
                                    propertyName.substr(1) + ": " + el.value + "</div>";
                    }
                }                
                return result;
            }

            $(document).ready(function(){
                // Replace the following values with your ApplicationID, ApiKey, Hosts and IndexName
                client = new AlgoliaSearch('ApplicationID', 'API-Key');

                    //['tvshowtime-1.algolia.io', 'tvshowtime-2.algolia.io', 'tvshowtime-3.algolia.io']),
                index = client.initIndex('YourIndex');

                index.search("", searchCallback);
                var inputField = $("#inputField");
                inputField.focus();

                // search after each keystroke
                inputField.keyup(function() {
                    index.search(inputField.val(), searchCallback); 
                });                
            });
        </script>
    </head>

    <body>
        <div id="main" class="container">
            <div class="searchfield">
                <input type="search" id="inputField" placeholder="Search by any attribute" spellcheck="false"/>
                <div class="servertime">&nbsp;<span style='color: #777;' id="servertime"></span></div>
            </div>
            <br/>
            <div class="row-fluid">
                    <div class="span3"></div>
                    <div class="span6 spanResults">
                        <ul id="results" class="result"></ul>
                    </div>
                    
            </div>
        </div>
    </body>
</html>
